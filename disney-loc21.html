<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Disney Navigation</title>

    <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
    <!--script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script-->
    <!--script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script-->
    <script src="https://raw.githack.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>

    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <!--script src="https://ardocent.com/aframe/wonder/js/aframe-extras-3.13.1.js"></script-->
    <script src="https://cdn.rawgit.com/donmccurdy/aframe-extras/v3.8.6/dist/aframe-extras.min.js"></script>
    <script src="https://cdn.rawgit.com/ngokevin/kframe/master/components/template/dist/aframe-template-component.min.js"></script>
    
    <!--script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script-->
    <script>
      AFRAME.registerComponent("soundhandler", {
        tick: function () {
          var entity = document.querySelector("#sound");
          if (document.querySelector("#Dragon").object3D.visible === true) {
            entity.play();
          } else {
            entity.pause();
          }
        },
      });
    </script>

    <style>
      .info {
        position: absolute;
        top: 0;
        left: 0;
        padding: 5px;
        background-color: #00ff0000;
        border: 2px solid #00ff0000;
        z-index: 9999;
      }

      div {
        text-align: center;
      }

      label {
        color: white;
      }
    </style>
    <!--style>
* {
  margin: 0;
  padding: 0;
}

body {
  margin: 100px;
}

.pop-layer .pop-container {
  padding: 20px 25px;
}

.pop-layer p.ctxt {
  color: #666;
  line-height: 25px;
}

.pop-layer .btn-r {
  width: 100%;
  margin: 10px 0 20px;
  padding-top: 10px;
  border-top: 1px solid #DDD;
  text-align: right;
}

.pop-layer {
  display: none;
  position: absolute;
  top: 50%;
  left: 50%;
  width: 410px;
  height: auto;
  background-color: #fff;
  border: 5px solid #3571B5;
  z-index: 10;
}

.dim-layer {
  display: none;
  position: fixed;
  _position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 100;
}

.dim-layer .dimBg {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  opacity: .5;
  filter: alpha(opacity=50);
}

.dim-layer .pop-layer {
  display: block;
}

a.btn-layerClose {
  display: inline-block;
  height: 25px;
  padding: 0 14px 0;
  border: 1px solid #304a8a;
  background-color: #3f5a9d;
  font-size: 13px;
  color: #fff;
  line-height: 25px;
}

a.btn-layerClose:hover {
  border: 1px solid #091940;
  background-color: #1f326a;
  color: #fff;
}
    </style-->
    <script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
  </head>


  <body style="margin: 0; overflow: hidden">
    <div class="info">
      <section>
        <img
          src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/MickeyMoon-100.png?v=1666074236907"
          width="20%"
          height="20%"
        /><br />
      </section>
      <section>
        <label id="text"> </label>
      </section>
    </div>

    <script src="Disney-geolocation.js"></script>
<!--div style="height: 300px;"></div>
<a href="#layer1" class="btn-example">일반 팝업레이어</a>
<div id="layer1" class="pop-layer">
    <div class="pop-container">
        <div class="pop-conts">
            <!--content //-->
            <p class="ctxt mb20">Thank you.<br>
                Your registration was submitted successfully.<br>
                Selected invitees will be notified by e-mail on JANUARY 24th.<br><br>
                Hope to see you soon!
            </p>

            <div class="btn-r">
                <a href="#" class="btn-layerClose">Close</a>
            </div>
        </div>
    </div>
</div-->
<br/><br/>
<a href="#layer2" class="btn-example">딤처리 팝업레이어 1</a>
<div class="dim-layer">
    <div class="dimBg"></div>
    <div id="layer2" class="pop-layer">
        <div class="pop-container">
            <div class="pop-conts">
                <!--content //-->
                <p class="ctxt mb20">Thank you.<br>
                    Your registration was submitted successfully.<br>
                    Selected invitees will be notified by e-mail on JANUARY 24th.<br><br>
                    Hope to see you soon!
                </p>

                <div class="btn-r">
                    <a href="#" class="btn-layerClose">Close</a>
                </div>
                <!--// content-->
            </div>
        </div>
    </div>
</div-->

    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="antialias: true; logarithmicDepthBuffer: true; colorManagement: true; sortObjects: true; alpha: true"
    >
      <a-asset>
        <!--a-asset-item
          id="DisneyBalloon"
          src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/disney-balloon.glb?v=1666074266154"
        ></a-asset-item-->
        <!--a-asset-item
          id="kneel-pointing-mickey"
          src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/kneel-pointing-mickey.glb?v=1666255005841"
        ></a-asset-item-->
        <!--a-asset-item
          id="firework"
          src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/mickey-moon-firework-small-logo-1.glb?v=1666074295092"
        ></a-asset-item-->
        <a-asset-item
          id="kneel-pointing-mickey2"
          src="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/kneel-pointing-mickey-2.glb?v=1666667683488"
        ></a-asset-item>
      </a-asset>
<!--a-entity camera="active: true" look-controls wasd-controls position="0 0 5">
      <a-entity
        id="pointer1"
        gltf-model="#kneel-pointing-mickey2"
        rotation="0 310 0"
        gps-entity-place="latitude: 37.4893; longitude: 126.9553;"
        animation-mixer
        position="0 0 -50"
        scale="5 5 5"
      >
      </a-entity>
  </a-entity-->

      <!--a-entity id="pointer2" gltf-model="#kneel-pointing-mickey" 
                  gps-entity-place="latitude: 37.4892; longitude: 126.9561;" 
            look-at="#camera" animation-mixer
            scale="5 5 5">
        </a-entity>
        <a-entity id="pointer3" gltf-model="#firework" 
                  gps-entity-place="latitude: 37.4889; longitude: 126.9571;" 
            look-at="#camera" animation-mixer
            scale="5 5 5">
        </a-entity-->

      <!--a-text
        id="text"
        value=""
        color="#FFFFFF"
        shader="msdf"
        font="https://raw.githubusercontent.com/myso-kr/aframe-fonts-korean/master/fonts/ofl/nanumgothic/NanumGothic-ExtraBold.json"
        look-at="#camera"
        scale="20 20 20"
        position = "0 0 -10"
      ></a-text-->
      <a-camera
        id="camera"
        gps-projected-camera="simulateLatitude: 37.4894; simulateLongitude: 126.9557; simulateAltitude: 300; gpsMinDistance: 10;"
        rotation-reader
        look-controls-enabled="true"
        arjs-look-controls="smoothingFactor: 0.1"
        user-height="1.6"
        gps-camera-position
        gps-camera-rotation
        gps-camera-debug
      >

      </a-camera>
        <a-entity camera look-controls>
                    <a-entity
        id="pointer1"
        gltf-model="#kneel-pointing-mickey2"
        rotation="0 310 0"
        gps-entity-place="latitude: 37.4893; longitude: 126.9553;"
        animation-mixer
        position="0 0 -50"
        scale="5 5 5"
      >
      </a-entity>
      </a-entity>
      <a-entity
        id="point_light_1"
        light="type: point; intensity: 10.1; castShadow: false"
      ></a-entity>
    </a-scene>
    <script>
    $('.btn-example').click(function(){
        var $href = $(this).attr('href');
        layer_popup($href);
    });
    function layer_popup(el){

        var $el = $(el);		//레이어의 id를 $el 변수에 저장
        var isDim = $el.prev().hasClass('dimBg');	//dimmed 레이어를 감지하기 위한 boolean 변수

        isDim ? $('.dim-layer').fadeIn() : $el.fadeIn();

        var $elWidth = ~~($el.outerWidth()),
            $elHeight = ~~($el.outerHeight()),
            docWidth = $(document).width(),
            docHeight = $(document).height();

        // 화면의 중앙에 레이어를 띄운다.
        if ($elHeight < docHeight || $elWidth < docWidth) {
            $el.css({
                marginTop: -$elHeight /2,
                marginLeft: -$elWidth/2
            })
        } else {
            $el.css({top: 0, left: 0});
        }

        $el.find('a.btn-layerClose').click(function(){
            isDim ? $('.dim-layer').fadeOut() : $el.fadeOut(); // 닫기 버튼을 클릭하면 레이어가 닫힌다.
            return false;
        });

        $('.layer .dimBg').click(function(){
            $('.dim-layer').fadeOut();
            return false;
        });

    }</script>
  </body>
</html>
