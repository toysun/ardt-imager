<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>Disney Navigation</title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <!--script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script-->
    <!--script src="https://cdn.jsdelivr.net/gh/aframevr/aframe@1c2407b26c61958baa93967b5412487cd94b290b/dist/aframe-master.min.js"></script-->

    <script src="https://unpkg.com/aframe-look-at-component@0.8.0/dist/aframe-look-at-component.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar-nft.js"></script>
    <script src="https://ardocent.com/aframe/wonder/js/aframe-extras-3.13.1.js"></script>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css"
      integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ"
      crossorigin="anonymous"
    />
    <!--script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.2/underscore-min.js"></script-->
    <script
      src="https://code.jquery.com/jquery-3.6.0.slim.js"
      integrity="sha256-HwWONEZrpuoh951cQD1ov2HUK5zA5DwJ1DNUXaM6FsY="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
      integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
      integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
      crossorigin="anonymous"
    ></script>

    <!--script>
      THREEx.ArToolkitContext.baseURL =
        "https://raw.githack.com/jeromeetienne/ar.js/master/three.js/";
    </script-->
    <!--style>
      #debug {
        position: fixed;
        z-index: 99999;
        background-color: #fffff;
        padding: 10px;
        top: 0;
        left: 0;
        display: block;
      }
    </style-->
    <style>
      body {
        padding-top: 80px;
      }

      .show-cart li {
        display: flex;
      }
      .card {
        margin-bottom: 20px;
      }
      .card-img-top {
        width: 200px;
        height: 200px;
        align-self: center;
      }
    </style>
  </head>

  <body style="margin: 0; overflow: hidden">
    <script src="shoppingcart.js"></script>
    <!-- Nav -->
    <nav class="navbar navbar-inverse bg-inverse fixed-top bg-faded">
      <div class="row">
        <div class="col">
          <button
            type="button"
            class="btn btn-primary"
            data-toggle="modal"
            data-target="#cart"
          >
            Cart (<span class="total-count"></span>)</button
          ><button class="clear-cart btn btn-danger">Clear Cart</button>
        </div>
      </div>
    </nav>

    <!-- Main -->
    <div class="container">
      <div class="row">
        <div class="col">
          <div class="card" style="width: 20rem">
            <img
              class="card-img-top"
              src="http://www.azspagirls.com/files/2010/09/orange.jpg"
              alt="Card image cap"
            />
            <div class="card-block">
              <h4 class="card-title">Orange</h4>
              <p class="card-text">Point: 10</p>
              <a
                href="#"
                data-name="Orange"
                data-price="0.5"
                class="add-to-cart btn btn-primary"
                >Add to cart</a
              >
            </div>
          </div>
        </div>
        <!--div class="col">
          <div class="card" style="width: 20rem">
            <img
              class="card-img-top"
              src="http://images.all-free-download.com/images/graphicthumb/vector_illustration_of_ripe_bananas_567893.jpg"
              alt="Card image cap"
            />
            <div class="card-block">
              <h4 class="card-title">Banana</h4>
              <p class="card-text">Price: $1.22</p>
              <a
                href="#"
                data-name="Banana"
                data-price="1.22"
                class="add-to-cart btn btn-primary"
                >Add to cart</a
              >
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card" style="width: 20rem">
            <img
              class="card-img-top"
              src="https://3.imimg.com/data3/IC/JO/MY-9839190/organic-lemon-250x250.jpg"
              alt="Card image cap"
            />
            <div class="card-block">
              <h4 class="card-title">Lemon</h4>
              <p class="card-text">Price: $5</p>
              <a
                href="#"
                data-name="Lemon"
                data-price="5"
                class="add-to-cart btn btn-primary"
                >Add to cart</a
              >
            </div>
          </div>
        </div-->
      </div>
    </div>

    <!-- Modal -->
    <div
      class="modal fade"
      id="cart"
      tabindex="-1"
      role="dialog"
      aria-labelledby="exampleModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Cart</h5>
            <button
              type="button"
              class="close"
              data-dismiss="modal"
              aria-label="Close"
            >
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <table class="show-cart table"></table>
            <div>Total price: $<span class="total-cart"></span></div>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-dismiss="modal"
            >
              Close
            </button>
            <button type="button" class="btn btn-primary">Order now</button>
          </div>
        </div>
      </div>
    </div>

    <!--div id="debug"></div-->
    <!--a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
    -->
    <a-scene
      vr-mode-ui="enabled: false"
      embedded
      arjs="sourceType: webcam; debugUIEnabled: false;"
      renderer="antialias: true; logarithmicDepthBuffer: true; colorManagement: true; sortObjects: true; alpha: true"
    >
      <!--a-box
        material="color: red"
        gps-entity-place="latitude: 37.4911; longitude: 126.9556;"
        scale="15 15 15"

        look-at="#camera"
             
      ></a-box-->
      <a-entity
        id="pointer"
        gltf-model="https://cdn.glitch.global/9b4e3877-21ac-4e94-b55a-c8b576c5b670/kneel-pointing-mickey.glb?v=1666255005841"
        gps-entity-place="latitude: 37.4911; longitude: 126.9556;"
        look-at="#camera"
        animation-mixer
        scale="25 25 25"
      >
      </a-entity>
      <!--a-text
        id="text"
        value=""
        look-at="[gps-camera]"
        scale="30 30 30"
        position="0 55 0"
        gps-entity-place="latitude: 37.4681; longitude: 126.959;"
      ></a-text-->

      <a-text
        id="text"
        value=""
        color="#FFFFFF"
        shader="msdf"
        font="https://raw.githubusercontent.com/myso-kr/aframe-fonts-korean/master/fonts/ofl/nanumgothic/NanumGothic-ExtraBold.json"
        look-at="#camera"
        scale="20 20 20"
        position="-150 295 0"
        gps-entity-place="latitude: 37.4911; longitude: 126.9556;"
      ></a-text>
      <a-camera
        id="camera"
        gps-camera="simulateLatitude: 37.4894; simulateLongitude: 126.9557; simulateAltitude: 300"
        rotation-reader
      >
      </a-camera>
      <!--a-light
          type="directional"
          light="castShadow: true;
                      shadowMapHeight: 1024;
                      shadowMapWidth: 1024;
                      shadowCameraLeft: -7;
                      shadowCameraRight: 5;
                      shadowCameraBottom: -5;
                      shadowCameraTop: 5;"
          id="light"
          target="pointer"
          position="180 180 180"
        >
        </a-light-->
      <!--a-light type="ambient" intensity="0.01"></a-light-->
      <a-entity
        id="point_light_1"
        light="type: point; intensity: 10.1; castShadow: false"
      ></a-entity>
    </a-scene>

    <script>
      window.addEventListener("load", () => {
        const text = document.getElementById("text");
        const camera = document.getElementById("camera");
        const distanceMsg = document
          .querySelector("[gps-entity-place]")
          .getAttribute("distanceMsg");

        text.setAttribute("value", text.getAttribute("distanceMsg"));
      });
    </script>
    <!--script> 
      window.addEventListener("load", () => {
        const text = document.getElementById("text");
        const camera = document.getElementById("camera");
        const distanceMsg = document.querySelector('[gps-entity-place]').getAttribute('distanceMsg');
        text.addEventListener("gps-entity-place-update-positon", (e) => {
          document.getElementById(
            "debug"
          ).textContent = "남은 거리 ${event.detail.distance}m";
          text.setAttribute(
            "value",
            text.getAttribute("distanceMsg") + " left"
          );
        });
      });
    </script-->
  </body>
</html>
